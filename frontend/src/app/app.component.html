<div class="main" [ngClass]="{ 'has-content': showContent && !isFloatingContent }" fxLayout="row">
  <div class="actions">
    <button color="primary" mat-mini-fab [matMenuTriggerFor]="menu">
      <mat-icon>menu</mat-icon>
    </button>
    <button color="primary" mat-mini-fab [matMenuTriggerFor]="languagesMenu">
      <mat-icon>language</mat-icon>
    </button>
    <mat-menu #menu="matMenu" class="menu">
      <button mat-menu-item (click)="onSectionSelected('crags')">{{ 'CRAGS' | translate }}</button>
      <button mat-menu-item (click)="onSectionSelected('hikes')">{{ 'HIKES' | translate }}</button>
      <button mat-menu-item (click)="onSectionSelected('shelters')">{{ 'SHELTERS' | translate }}</button>
      <button mat-menu-item (click)="onSectionSelected('places')">{{ 'PLACES' | translate }}</button>
      <button mat-menu-item (click)="onSectionSelected('competitions')">{{ 'COMPETITIONS' | translate }}</button>
      <button mat-menu-item (click)="onSectionSelected('news')">{{ 'NEWS' | translate }}</button>
      <div class="separator"></div>
      <button mat-menu-item (click)="onExternalLinkSelected('https://github.com/WeClimb-it')">
        {{ 'GITHUB' | translate }}
      </button>
      <button mat-menu-item (click)="onExternalLinkSelected('https://github.com/WeClimb-it/weclimb.it/issues')">
        {{ 'GITHUB_ISSUES' | translate }}
      </button>

      <div class="separator"></div>
      <div class="copyleft">(É”) - {{ year }} WeClimb.it</div>
    </mat-menu>
    <mat-menu #languagesMenu="matMenu" class="languages-menu">
      <button
        mat-menu-item
        *ngFor="let language of environment.i18n.availableLangsLabels; let i = index"
        (click)="onLanguageSelected(i)"
      >
        {{ language }}
      </button>
    </mat-menu>
  </div>
  <div class="map">
    <div class="header-container">
      <wci-header
        class="header"
        (search)="onSearch($event)"
        (queryChanged)="onSearchQueryChanged($event)"
        (suggestionSelected)="onSuggestionSelected($event)"
        (optionsUpdated)="onOptionsUpdated($event)"
      ></wci-header>
    </div>
    <wci-map
      [zoom]="zoom"
      [centerLocation]="currentLocation"
      [userLocation]="userLocation"
      [pois]="nearbyPois"
      (ready)="onMapReadyOrUpdate($event)"
      (update)="onMapReadyOrUpdate($event)"
    ></wci-map>
  </div>
  <div class="sidenav" fxShow="false" fxShow.gt-sm>
    <wci-sidebar
      [loading]="isNearbyLoading"
      [currentLocation]="currentLocation"
      [pois]="latestPois"
      (sectionSelected)="onSectionSelected($event)"
      (poiSelected)="onPoiSelected($event)"
    ></wci-sidebar>
  </div>
  <div class="content" *ngIf="showContent && !isFloatingContent">
    <div class="section">
      <router-outlet></router-outlet>
    </div>
  </div>
</div>
<ng-container *ngIf="showContent && isFloatingContent">
  <router-outlet></router-outlet>
</ng-container>
